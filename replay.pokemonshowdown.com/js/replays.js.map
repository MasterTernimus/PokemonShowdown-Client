{"version":3,"file":"replays.js","names":["SearchPanel","_preact$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","results","resultError","format","user","isPrivate","byRating","page","loggedInUser","loggedInUserIsSysop","sort","submitForm","e","_querySelector","_querySelector2","_querySelector3","preventDefault","base","querySelector","value","checked","search","cancelForm","searchLoggedIn","_inheritsLoose","_proto","prototype","componentDidMount","_this2","Net","get","then","result","charAt","_result$slice$split","slice","split","userid","sysop","forceUpdate","updateSearch","decodeQuery","props","id","componentDidUpdate","previousProps","query","parseInt","parseResponse","response","JSON","parse","isArray","actionerror","_this3","undefined","querySelectorAll","recent","PSRouter","replace","encodeQuery","username","error","modLink","overrides","newPage","_this4","url","replay","viewpointSwitched","toID","players","password","formatid","startsWith","test","uploadtime","render","_this$results","_this5","_this$results2","activelySearching","hasNextPageLink","searchResults","preact","h","map","href","rating","showingRight","onSubmit","type","name","placeholder","size","onClick","FeaturedReplays","Component","_preact$Component2","_this6","_len2","_key2","moreFun","moreCompetitive","showMoreFun","showMoreCompetitive","_proto2","style","paddingLeft","_PSModel","_class","_this7","baseLoc","leftLoc","rightLoc","forceSinglePanel","stickyRight","baseLocSlashIndex","document","location","lastIndexOf","go","setSinglePanel","window","history","addEventListener","popState","update","onresize","_proto3","showingLeft","init","singlePanel","innerWidth","innerHeight","push","_window$history","pushState","loc","_window$history2","replaceState","state","_e$state","PSModel","PSReplays","_preact$Component3","updateDarkMode","dark","darkMode","matchMedia","matches","documentElement","className","_proto4","_this8","subscribe","el","target","parentNode","tagName","stopImmediatePropagation","position","display","flexDirection","justifyContent","BattlePanel","clear","getElementById","event"],"sources":["../src/replays.tsx"],"sourcesContent":["/** @jsx preact.h */\r\nimport preact from 'preact';\r\nimport {Net, PSModel} from './utils';\r\nimport {BattlePanel} from './replays-battle';\r\ndeclare function toID(input: string): string;\r\n\r\ninterface ReplayResult {\r\n  uploadtime: number;\r\n  id: string;\r\n  format: string;\r\n  players: string[];\r\n  password?: string;\r\n  private?: number;\r\n  rating?: number;\r\n}\r\n\r\nclass SearchPanel extends preact.Component<{id: string}> {\r\n  results: ReplayResult[] | null = null;\r\n  resultError: string | null = null;\r\n  format = '';\r\n  user = '';\r\n  isPrivate = false;\r\n  byRating = false;\r\n  page = 1;\r\n  loggedInUser: string | null = null;\r\n  loggedInUserIsSysop = false;\r\n  sort = 'date';\r\n  override componentDidMount() {\r\n    Net('/check-login.php').get().then(result => {\r\n      if (result.charAt(0) !== ']') return;\r\n      const [userid, sysop] = result.slice(1).split(',');\r\n      this.loggedInUser = userid;\r\n      this.loggedInUserIsSysop = !!sysop;\r\n      this.forceUpdate();\r\n    });\r\n    this.updateSearch(Net.decodeQuery(this.props.id));\r\n  }\r\n  override componentDidUpdate(previousProps: this['props']) {\r\n    if (this.props.id === previousProps.id) return;\r\n    const query = Net.decodeQuery(this.props.id);\r\n    const page = parseInt(query.page || '1');\r\n    const byRating = (query.sort === 'rating');\r\n    if (page !== this.page || byRating !== this.byRating) this.updateSearch(query);\r\n  }\r\n  updateSearch(query: {[k: string]: string}) {\r\n    const user = query.user || '';\r\n    const format = query.format || '';\r\n    const page = parseInt(query.page || '1');\r\n    const isPrivate = !!query.private;\r\n    this.byRating = (query.sort === 'rating');\r\n    this.search(user, format, isPrivate, page);\r\n  }\r\n  parseResponse(response: string, isPrivate?: boolean) {\r\n    this.results = null;\r\n    this.resultError = null;\r\n\r\n    if (isPrivate) {\r\n      if (response.charAt(0) !== ']') {\r\n        this.resultError = `Unrecognized response: ${response}`;\r\n        return;\r\n      }\r\n      response = response.slice(1);\r\n    }\r\n    const results = JSON.parse(response);\r\n    if (!Array.isArray(results)) {\r\n      this.resultError = results.actionerror || `Unrecognized response: ${response}`;\r\n      return;\r\n    }\r\n    this.results = results;\r\n  }\r\n  search(user: string, format: string, isPrivate?: boolean, page = 1) {\r\n    this.base!.querySelector<HTMLInputElement>('input[name=user]')!.value = user;\r\n    this.base!.querySelector<HTMLInputElement>('input[name=format]')!.value = format;\r\n    this.base!.querySelectorAll<HTMLInputElement>('input[name=private]')[isPrivate ? 1 : 0]!.checked = true;\r\n\r\n    if (!format && !user) return this.recent();\r\n    this.user = user;\r\n    this.format = format;\r\n    this.isPrivate = !!isPrivate;\r\n    this.page = page;\r\n    this.results = null;\r\n    this.resultError = null;\r\n    if (user || !format) this.byRating = false;\r\n\r\n    if (!format && !user) {\r\n      PSRouter.replace('')\r\n    } else {\r\n      PSRouter.replace('?' + Net.encodeQuery({\r\n        user: user || undefined,\r\n        format: format || undefined,\r\n        private: isPrivate ? '1' : undefined,\r\n        page: page === 1 ? undefined : page,\r\n        sort: this.byRating ? 'rating' : undefined,\r\n      }));\r\n    }\r\n    this.forceUpdate();\r\n    Net(`/api/replays/${isPrivate ? 'searchprivate' : 'search'}`).get({\r\n      query: {\r\n        username: this.user,\r\n        format: this.format,\r\n        page,\r\n        sort: this.byRating ? 'rating' : undefined,\r\n      },\r\n    }).then(response => {\r\n      if (this.format !== format || this.user !== user) return;\r\n      this.parseResponse(response, true);\r\n      this.forceUpdate();\r\n    }).catch(error => {\r\n      if (this.format !== '' || this.user !== '') return;\r\n      this.resultError = '' + error;\r\n      this.forceUpdate();\r\n    });\r\n  }\r\n  modLink(overrides: {page?: number, sort?: string}) {\r\n    const newPage = (overrides.page !== undefined ? this.page + overrides.page : 1);\r\n    return './?' + Net.encodeQuery({\r\n      user: this.user || undefined,\r\n      format: this.format || undefined,\r\n      private: this.isPrivate ? '1' : undefined,\r\n      page: newPage === 1 ? undefined : newPage,\r\n      sort: (overrides.sort ? overrides.sort === 'rating' : this.byRating) ? 'rating' : undefined,\r\n    });\r\n  }\r\n  recent() {\r\n    this.format = '';\r\n    this.user = '';\r\n    this.results = null;\r\n    this.forceUpdate();\r\n    Net('/api/replays/recent').get().then(response => {\r\n      if (this.format !== '' || this.user !== '') return;\r\n      this.parseResponse(response, true);\r\n      this.forceUpdate();\r\n    }).catch(error => {\r\n      if (this.format !== '' || this.user !== '') return;\r\n      this.resultError = '' + error;\r\n      this.forceUpdate();\r\n    });\r\n  }\r\n  submitForm = (e: Event) => {\r\n    e.preventDefault();\r\n    const format = this.base!.querySelector<HTMLInputElement>('input[name=format]')?.value || '';\r\n    const user = this.base!.querySelector<HTMLInputElement>('input[name=user]')?.value || '';\r\n    const isPrivate = !this.base!.querySelector<HTMLInputElement>('input[name=private]')?.checked;\r\n    this.search(user, format, isPrivate);\r\n  };\r\n  cancelForm = (e: Event) => {\r\n    e.preventDefault();\r\n    this.search('', '');\r\n  };\r\n  searchLoggedIn = (e: Event) => {\r\n    if (!this.loggedInUser) return; // shouldn't happen\r\n    (this.base!.querySelector('input[name=user]') as HTMLInputElement).value = this.loggedInUser;\r\n    this.submitForm(e);\r\n  };\r\n  url(replay: ReplayResult) {\r\n    const viewpointSwitched = (toID(replay.players[1]) === toID(this.user));\r\n    return replay.id + (replay.password ? `-${replay.password}pw` : '') + (viewpointSwitched ? '?p2' : '');\r\n  }\r\n  formatid(replay: ReplayResult) {\r\n    let formatid = replay.format;\r\n    if (!formatid.startsWith('gen') || !/[0-9]/.test(formatid.charAt(3))) {\r\n      // 2013 Oct 14, two days after X and Y were released; good enough\r\n      // estimate for when we renamed `ou` to `gen5ou`.\r\n      formatid = (replay.uploadtime > 1381734000 ? 'gen6' : 'gen5') + formatid;\r\n    }\r\n    if (!/^gen[0-9]+-/.test(formatid)) {\r\n      formatid = formatid.slice(0, 4) + '-' + formatid.slice(4);\r\n    }\r\n    return formatid;\r\n  }\r\n  override render() {\r\n    const activelySearching = !!(this.format || this.user);\r\n    const hasNextPageLink = (this.results?.length || 0) > 50;\r\n    const results = hasNextPageLink ? this.results!.slice(0, 50) : this.results;\r\n    const searchResults = <ul class=\"linklist\">\r\n      {(this.resultError && <li>\r\n        <strong class=\"message-error\">{this.resultError}</strong>\r\n      </li>) ||\r\n      (!results && <li>\r\n        <em>Loading...</em>\r\n      </li>) ||\r\n      (results?.map(result => <li>\r\n        <a href={this.url(result)} class=\"blocklink\">\r\n          <small>{result.format}{result.rating ? ` (Rating: ${result.rating})` : ''}<br /></small>\r\n          {!!result.private && <i class=\"fa fa-lock\"></i>} {}\r\n          <strong>{result.players[0]}</strong> vs. <strong>{result.players[1]}</strong>\r\n        </a>\r\n      </li>))}\r\n    </ul>;\r\n    return <div class={PSRouter.showingRight() ? 'sidebar' : ''}>\r\n      <section class=\"section first-section\">\r\n        <h1>Search replays</h1>\r\n        <form onSubmit={this.submitForm}>\r\n          <p>\r\n            <label>\r\n              Username:<br />\r\n              <input type=\"search\" class=\"textbox\" name=\"user\" placeholder=\"(blank = any user)\" size={20} /> {}\r\n              {this.loggedInUser && <button type=\"button\" class=\"button\" onClick={this.searchLoggedIn}>{this.loggedInUser}'s replays</button>}\r\n            </label>\r\n          </p>\r\n          <p>\r\n            <label>Format:<br />\r\n            <input type=\"search\" class=\"textbox\" name=\"format\" placeholder=\"(blank = any format)\" size={30} /></label>\r\n          </p>\r\n          <p>\r\n            <label class=\"checkbox inline\"><input type=\"radio\" name=\"private\" value=\"\" /> Public</label> {}\r\n            <label class=\"checkbox inline\"><input type=\"radio\" name=\"private\" value=\"1\" /> Private (your own replays only)</label>\r\n          </p>\r\n          <p>\r\n            <button type=\"submit\" class=\"button\"><i class=\"fa fa-search\" aria-hidden></i> <strong>Search</strong></button> {}\r\n            {activelySearching && <button class=\"button\" onClick={this.cancelForm}>Cancel</button>}\r\n          </p>\r\n          {activelySearching && <h1 aria-label=\"Results\"></h1>}\r\n          {activelySearching && this.format && !this.user && <p>\r\n            Sort by: {}\r\n            <a href={this.modLink({sort: 'date'})} class={`button button-first${this.byRating ? '' : ' disabled'}`}>\r\n              Date\r\n            </a>\r\n            <a href={this.modLink({sort: 'rating'})} class={`button button-last${this.byRating ? ' disabled' : ''}`}>\r\n              Rating\r\n            </a>\r\n          </p>}\r\n          {activelySearching && this.page > 1 && <p class=\"pagelink\">\r\n            <a href={this.modLink({page: -1})} class=\"button\"><i class=\"fa fa-caret-up\"></i><br />Page {this.page - 1}</a>\r\n          </p>}\r\n          {activelySearching && searchResults}\r\n          {activelySearching && (this.results?.length || 0) > 50 && <p class=\"pagelink\">\r\n            <a href={this.modLink({page: 1})} class=\"button\">Page {this.page + 1}<br /><i class=\"fa fa-caret-down\"></i></a>\r\n          </p>}\r\n        </form>\r\n      </section>\r\n      {!activelySearching && <FeaturedReplays />}\r\n      {!activelySearching && <section class=\"section\">\r\n        <h1>Recent replays</h1>\r\n        <ul class=\"linklist\">\r\n          {searchResults}\r\n        </ul>\r\n      </section>}\r\n    </div>;\r\n  }\r\n}\r\n\r\nclass FeaturedReplays extends preact.Component {\r\n  moreFun = false;\r\n  moreCompetitive = false;\r\n  showMoreFun = (e: Event) => {\r\n    e.preventDefault();\r\n    this.moreFun = true;\r\n    this.forceUpdate();\r\n  };\r\n  showMoreCompetitive = (e: Event) => {\r\n    e.preventDefault();\r\n    this.moreCompetitive = true;\r\n    this.forceUpdate();\r\n  };\r\n  override render() {\r\n    return <section class=\"section\">\r\n      <h1>Featured replays</h1>\r\n      <ul class=\"linklist\">\r\n        <li><h2>Fun</h2></li>\r\n        <li><a href=\"oumonotype-82345404\" class=\"blocklink\">\r\n          <small>[gen6-oumonotype]<br /></small>\r\n          <strong>kdarewolf</strong> vs. <strong>Onox</strong>\r\n          <small><br />Protean + prediction</small>\r\n        </a></li>\r\n        <li><a href=\"anythinggoes-218380995?p2\" class=\"blocklink\">\r\n          <small>[gen6-anythinggoes]<br /></small>\r\n          <strong>Anta2</strong> vs. <strong>dscottnew</strong>\r\n          <small><br />Cheek Pouch</small>\r\n        </a></li>\r\n        <li><a href=\"uberssuspecttest-147833524\" class=\"blocklink\">\r\n          <small>[gen6-ubers]<br /></small>\r\n          <strong>Metal Brellow</strong> vs. <strong>zig100</strong>\r\n          <small><br />Topsy-Turvy</small>\r\n        </a></li>\r\n        {!this.moreFun && <li style={{paddingLeft: '8px'}}>\r\n          <button class=\"button\" onClick={this.showMoreFun}>More <i class=\"fa fa-caret-right\" aria-hidden></i></button>\r\n        </li>}\r\n        {this.moreFun && <li><a href=\"smogondoubles-75588440?p2\" class=\"blocklink\">\r\n          <small>[gen6-smogondoubles]<br /></small>\r\n          <strong>jamace6</strong> vs. <strong>DubsWelder</strong>\r\n          <small><br />Garchomp sweeps 11 pokemon</small>\r\n        </a></li>}\r\n        {this.moreFun && <li><a href=\"ou-20651579?p2\" class=\"blocklink\">\r\n          <small>[gen5-ou]<br /></small>\r\n          <strong>RainSeven07</strong> vs. <strong>my body is regi</strong>\r\n          <small><br />An entire team based on Assist V-create</small>\r\n        </a></li>}\r\n        {this.moreFun && <li><a href=\"balancedhackmons7322360?p2\" class=\"blocklink\">\r\n          <small>[gen5-balancedhackmons]<br /></small>\r\n          <strong>a ver</strong> vs. <strong>Shuckie</strong>\r\n          <small><br />To a ver's frustration, PP stall is viable in Balanced Hackmons</small>\r\n        </a></li>}\r\n        <h2>Competitive</h2>\r\n        <li><a href=\"doublesou-232753081\" class=\"blocklink\">\r\n          <small>[gen6-doublesou]<br /></small>\r\n          <strong>Electrolyte</strong> vs. <strong>finally</strong>\r\n          <small><br />finally steals Electrolyte's spot in the finals of the Doubles Winter Seasonal by outplaying Toxic Aegislash.</small>\r\n        </a></li>\r\n        <li><a href=\"smogtours-gen5ou-59402\" class=\"blocklink\">\r\n          <small>[gen5-ou]<br /></small>\r\n          <strong>Reymedy</strong> vs. <strong>Leftiez</strong>\r\n          <small><br />Reymedy's superior grasp over BW OU lead to his claim of victory over Leftiez in the No Johns Tournament.</small>\r\n        </a></li>\r\n        <li><a href=\"smogtours-gen3ou-56583\" class=\"blocklink\">\r\n          <small>[gen3-ou]<br /></small>\r\n          <strong>pokebasket</strong> vs. <strong>Alf'</strong>\r\n          <small><br />pokebasket proved Blissey isn't really one to take a Focus Punch well in his victory match over Alf' in the Fuck Trappers ADV OU tournament.</small>\r\n        </a></li>\r\n        <li><a href=\"smogtours-ou-55891\" class=\"blocklink\">\r\n          <small>[gen6-ou]<br /></small>\r\n          <strong>Marshall.Law</strong> vs. <strong>Malekith</strong>\r\n          <small><br />In a \"match full of reverses\", Marshall.Law takes on Malekith in the finals of It's No Use.</small>\r\n        </a></li>\r\n        <li><a href=\"smogtours-ubers-54583\" class=\"blocklink\">\r\n          <small>[gen6-custom]<br /></small>\r\n          <strong>hard</strong> vs. <strong>panamaxis</strong>\r\n          <small><br />Dark horse panamaxis proves his worth as the rightful winner of The Walkthrough Tournament in this exciting final versus hard.</small>\r\n        </a></li>\r\n        {!this.moreCompetitive && <li style={{paddingLeft: '8px'}}>\r\n          <button class=\"button\" onClick={this.showMoreCompetitive}>More <i class=\"fa fa-caret-right\" aria-hidden></i></button>\r\n        </li>}\r\n        {this.moreCompetitive && <li><a href=\"smogtours-ubers-34646\" class=\"blocklink\">\r\n          <small>[gen6-ubers]<br /></small>\r\n          <strong>steelphoenix</strong> vs. <strong>Jibaku</strong>\r\n          <small><br />In this SPL Week 4 battle, Jibaku's clever plays with Mega Sableye keep the momentum mostly in his favor.</small>\r\n        </a></li>}\r\n        {this.moreCompetitive && <li><a href=\"smogtours-uu-36860\" class=\"blocklink\">\r\n          <small>[gen6-uu]<br /></small>\r\n          <strong>IronBullet93</strong> vs. <strong>Laurel</strong>\r\n          <small><br />Laurel outplays IronBullet's Substitute Tyrantrum with the sly use of a Shuca Berry Cobalion, but luck was inevitably the deciding factor in this SPL Week 6 match.</small>\r\n        </a></li>}\r\n        {this.moreCompetitive && <li><a href=\"smogtours-gen5ou-36900\" class=\"blocklink\">\r\n          <small>[gen5-ou]<br /></small>\r\n          <strong>Lowgock</strong> vs. <strong>Meridian</strong>\r\n          <small><br />This SPL Week 6 match features impressive plays, from Jirachi sacrificing itself to paralysis to avoid a burn to some clever late-game switches.</small>\r\n        </a></li>}\r\n        {this.moreCompetitive && <li><a href=\"smogtours-gen4ou-36782\" class=\"blocklink\">\r\n          <small>[gen4-ou]<br /></small>\r\n          <strong>Heist</strong> vs. <strong>liberty32</strong>\r\n          <small><br />Starting out as an entry hazard-filled stallfest, this close match is eventually decided by liberty32's efficient use of Aerodactyl.</small>\r\n        </a></li>}\r\n        {this.moreCompetitive && <li><a href=\"randombattle-213274483\" class=\"blocklink\">\r\n          <small>[gen6-randombattle]<br /></small>\r\n          <strong>The Immortal</strong> vs. <strong>Amphinobite</strong>\r\n          <small><br />Substitute Lugia and Rotom-Fan take advantage of Slowking's utility and large HP stat, respectively, in this high ladder match.</small>\r\n        </a></li>}\r\n      </ul>\r\n    </section>;\r\n  }\r\n}\r\n\r\nexport const PSRouter = new class extends PSModel {\r\n  baseLoc: string;\r\n  leftLoc: string | null = null;\r\n  rightLoc: string | null = null;\r\n  forceSinglePanel = false;\r\n  stickyRight = true;\r\n  constructor() {\r\n    super();\r\n    const baseLocSlashIndex = document.location.href.lastIndexOf('/');\r\n    this.baseLoc = document.location.href.slice(0, baseLocSlashIndex + 1);\r\n    this.go(document.location.href);\r\n    this.setSinglePanel(true);\r\n    if (window.history) window.addEventListener('popstate', e => {\r\n      PSRouter.popState(e);\r\n      this.update();\r\n    });\r\n    window.onresize = () => {\r\n      PSRouter.setSinglePanel();\r\n    };\r\n  }\r\n  showingLeft() {\r\n    return this.leftLoc !== null && (!this.forceSinglePanel || this.rightLoc === null);\r\n  }\r\n  showingRight() {\r\n    return this.rightLoc !== null;\r\n  }\r\n  setSinglePanel(init?: boolean) {\r\n    const singlePanel = window.innerWidth < 1300;\r\n    const stickyRight = (window.innerHeight > 614);\r\n    if (this.forceSinglePanel !== singlePanel || this.stickyRight !== stickyRight) {\r\n      this.forceSinglePanel = singlePanel;\r\n      this.stickyRight = stickyRight;\r\n      if (!init) this.update();\r\n    }\r\n  }\r\n  push(href: string): boolean {\r\n    if (!href.startsWith(this.baseLoc)) return false;\r\n\r\n    if (this.go(href)) {\r\n      window.history?.pushState([this.leftLoc, this.rightLoc], '', href);\r\n    }\r\n    return true;\r\n  }\r\n  /** returns whether the URL should change */\r\n  go(href: string): boolean {\r\n    if (!href.startsWith(this.baseLoc)) return false;\r\n\r\n    const loc = href.slice(this.baseLoc.length);\r\n    if (!loc || loc.startsWith('?')) {\r\n      this.leftLoc = loc;\r\n      if (this.forceSinglePanel) {\r\n        this.rightLoc = null;\r\n      } else {\r\n        return this.rightLoc === null;\r\n      }\r\n    } else {\r\n      this.rightLoc = loc;\r\n    }\r\n    return true;\r\n  }\r\n  replace(loc: string) {\r\n    const href = this.baseLoc + loc;\r\n    if (this.go(href)) {\r\n      window.history?.replaceState([this.leftLoc, this.rightLoc], '', href);\r\n    }\r\n    return true;\r\n  }\r\n  popState(e: PopStateEvent) {\r\n    if (Array.isArray(e.state)) {\r\n      const [leftLoc, rightLoc] = e.state;\r\n      this.leftLoc = leftLoc;\r\n      this.rightLoc = rightLoc;\r\n      if (this.forceSinglePanel) this.leftLoc = null;\r\n    } else {\r\n      this.leftLoc = null;\r\n      this.rightLoc = null;\r\n      this.go(document.location.href);\r\n    }\r\n    this.update();\r\n  }\r\n};\r\n\r\nexport class PSReplays extends preact.Component {\r\n  static darkMode: 'dark' | 'light' | 'auto' = 'auto';\r\n  static updateDarkMode() {\r\n    let dark = this.darkMode === 'dark' ? 'dark' : '';\r\n    if (this.darkMode === 'auto') {\r\n      dark = window.matchMedia?.('(prefers-color-scheme: dark)').matches ? 'dark' : '';\r\n    }\r\n    document.documentElement.className = dark;\r\n  }\r\n  override componentDidMount() {\r\n    PSRouter.subscribe(() => this.forceUpdate());\r\n    if (window.history) {\r\n      this.base!.addEventListener('click', e => {\r\n        let el = e.target as HTMLElement;\r\n        for (; el; el = el.parentNode as HTMLElement) {\r\n          if (el.tagName === 'A' && PSRouter.push((el as HTMLAnchorElement).href)) {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n            this.forceUpdate();\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n  override render() {\r\n    const position = PSRouter.showingLeft() && PSRouter.showingRight() && !PSRouter.stickyRight ?\r\n      {display: 'flex', flexDirection: 'column', justifyContent: 'flex-end'} : {};\r\n    return <div class={'bar-wrapper' + (PSRouter.showingLeft() && PSRouter.showingRight() ? ' has-sidebar' : '')} style={position}>\r\n      {PSRouter.showingLeft() && <SearchPanel id={PSRouter.leftLoc!} />}\r\n      {PSRouter.showingRight() && <BattlePanel id={PSRouter.rightLoc!} />}\r\n      <div style={{clear: 'both'}}></div>\r\n    </div>;\r\n  }\r\n}\r\n\r\npreact.render(<PSReplays />, document.getElementById('main')!);\r\n\r\nif (window.matchMedia?.('(prefers-color-scheme: dark)').matches) {\r\n  document.documentElement.className = 'dark';\r\n}\r\nwindow.matchMedia?.('(prefers-color-scheme: dark)').addEventListener('change', event => {\r\n  if (PSReplays.darkMode === 'auto') document.documentElement.className = event.matches ? \"dark\" : \"\";\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;AAgBMA,WAAW,UAAAC,iBAAA,WAAAD,YAAA,MAAAE,KAAA,SAAAC,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAAC,IAAA,KAAAC,KAAA,CAAAJ,IAAA,EAAAK,IAAA,GAAAA,IAAA,CAAAL,IAAA,CAAAK,IAAA,IAAAF,IAAA,CAAAE,IAAA,EAAAJ,SAAA,CAAAI,IAAA,GAAAN,KAAA,CAAAD,iBAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,iBAAA,QAAAU,MAAA,CAAAL,IAAA,SAAAJ,KAAA;AACfU,OAAO,CAA0B,IAAI,CAAAV,KAAA;AACrCW,WAAW,CAAkB,IAAI,CAAAX,KAAA;AACjCY,MAAM,CAAG,EAAE,CAAAZ,KAAA;AACXa,IAAI,CAAG,EAAE,CAAAb,KAAA;AACTc,SAAS,CAAG,KAAK,CAAAd,KAAA;AACjBe,QAAQ,CAAG,KAAK,CAAAf,KAAA;AAChBgB,IAAI,CAAG,CAAC,CAAAhB,KAAA;AACRiB,YAAY,CAAkB,IAAI,CAAAjB,KAAA;AAClCkB,mBAAmB,CAAG,KAAK,CAAAlB,KAAA;AAC3BmB,IAAI,CAAG,MAAM,CAAAnB,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHboB,UAAU,CAAG,SAACC,CAAQ,CAAK,KAAAC,cAAA,CAAAC,eAAA,CAAAC,eAAA;AACzBH,CAAC,CAACI,cAAc,CAAC,CAAC;AAClB,GAAM,CAAAb,MAAM,CAAG,EAAAU,cAAA,CAAAtB,KAAA,CAAK0B,IAAI,CAAEC,aAAa,CAAmB,oBAAoB,CAAC,eAAhEL,cAAA,CAAkEM,KAAK,GAAI,EAAE;AAC5F,GAAM,CAAAf,IAAI,CAAG,EAAAU,eAAA,CAAAvB,KAAA,CAAK0B,IAAI,CAAEC,aAAa,CAAmB,kBAAkB,CAAC,eAA9DJ,eAAA,CAAgEK,KAAK,GAAI,EAAE;AACxF,GAAM,CAAAd,SAAS,CAAG,GAAAU,eAAA,CAACxB,KAAA,CAAK0B,IAAI,CAAEC,aAAa,CAAmB,qBAAqB,CAAC,SAAjEH,eAAA,CAAmEK,OAAO;AAC7F7B,KAAA,CAAK8B,MAAM,CAACjB,IAAI,CAAED,MAAM,CAAEE,SAAS,CAAC;AACtC,CAAC,CAAAd,KAAA;AACD+B,UAAU,CAAG,SAACV,CAAQ,CAAK;AACzBA,CAAC,CAACI,cAAc,CAAC,CAAC;AAClBzB,KAAA,CAAK8B,MAAM,CAAC,EAAE,CAAE,EAAE,CAAC;AACrB,CAAC,CAAA9B,KAAA;AACDgC,cAAc,CAAG,SAACX,CAAQ,CAAK;AAC7B,GAAI,CAACrB,KAAA,CAAKiB,YAAY,CAAE;AACvBjB,KAAA,CAAK0B,IAAI,CAAEC,aAAa,CAAC,kBAAkB,CAAC,CAAsBC,KAAK,CAAG5B,KAAA,CAAKiB,YAAY;AAC5FjB,KAAA,CAAKoB,UAAU,CAACC,CAAC,CAAC;AACpB,CAAC,QAAArB,KAAA,EAAAiC,cAAA,CAAAnC,WAAA,CAAAC,iBAAA,MAAAmC,MAAA,CAAApC,WAAA,CAAAqC,SAAA,CAAAD,MAAA,CA9HQE,iBAAiB,CAA1B,SAAAA,kBAAA,CAA6B,KAAAC,MAAA,MAC3BC,GAAG,CAAC,kBAAkB,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,MAAM,CAAI,CAC3C,GAAIA,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,GAAK,GAAG,CAAE,OAC9B,IAAAC,mBAAA,CAAwBF,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAA3CC,MAAM,CAAAH,mBAAA,IAAEI,KAAK,CAAAJ,mBAAA,IACpBN,MAAI,CAACpB,YAAY,CAAG6B,MAAM,CAC1BT,MAAI,CAACnB,mBAAmB,CAAG,CAAC,CAAC6B,KAAK,CAClCV,MAAI,CAACW,WAAW,CAAC,CAAC,CACpB,CAAC,CAAC,CACF,IAAI,CAACC,YAAY,CAACX,GAAG,CAACY,WAAW,CAAC,IAAI,CAACC,KAAK,CAACC,EAAE,CAAC,CAAC,CACnD,CAAC,CAAAlB,MAAA,CACQmB,kBAAkB,CAA3B,SAAAA,mBAA4BC,aAA4B,CAAE,CACxD,GAAI,IAAI,CAACH,KAAK,CAACC,EAAE,GAAKE,aAAa,CAACF,EAAE,CAAE,OACxC,GAAM,CAAAG,KAAK,CAAGjB,GAAG,CAACY,WAAW,CAAC,IAAI,CAACC,KAAK,CAACC,EAAE,CAAC,CAC5C,GAAM,CAAApC,IAAI,CAAGwC,QAAQ,CAACD,KAAK,CAACvC,IAAI,EAAI,GAAG,CAAC,CACxC,GAAM,CAAAD,QAAQ,CAAIwC,KAAK,CAACpC,IAAI,GAAK,QAAS,CAC1C,GAAIH,IAAI,GAAK,IAAI,CAACA,IAAI,EAAID,QAAQ,GAAK,IAAI,CAACA,QAAQ,CAAE,IAAI,CAACkC,YAAY,CAACM,KAAK,CAAC,CAChF,CAAC,CAAArB,MAAA,CACDe,YAAY,CAAZ,SAAAA,aAAaM,KAA4B,CAAE,CACzC,GAAM,CAAA1C,IAAI,CAAG0C,KAAK,CAAC1C,IAAI,EAAI,EAAE,CAC7B,GAAM,CAAAD,MAAM,CAAG2C,KAAK,CAAC3C,MAAM,EAAI,EAAE,CACjC,GAAM,CAAAI,IAAI,CAAGwC,QAAQ,CAACD,KAAK,CAACvC,IAAI,EAAI,GAAG,CAAC,CACxC,GAAM,CAAAF,SAAS,CAAG,CAAC,CAACyC,KAAK,WAAQ,CACjC,IAAI,CAACxC,QAAQ,CAAIwC,KAAK,CAACpC,IAAI,GAAK,QAAS,CACzC,IAAI,CAACW,MAAM,CAACjB,IAAI,CAAED,MAAM,CAAEE,SAAS,CAAEE,IAAI,CAAC,CAC5C,CAAC,CAAAkB,MAAA,CACDuB,aAAa,CAAb,SAAAA,cAAcC,QAAgB,CAAE5C,SAAmB,CAAE,CACnD,IAAI,CAACJ,OAAO,CAAG,IAAI,CACnB,IAAI,CAACC,WAAW,CAAG,IAAI,CAEvB,GAAIG,SAAS,CAAE,CACb,GAAI4C,QAAQ,CAAChB,MAAM,CAAC,CAAC,CAAC,GAAK,GAAG,CAAE,CAC9B,IAAI,CAAC/B,WAAW,2BAA6B+C,QAAU,CACvD,OACF,CACAA,QAAQ,CAAGA,QAAQ,CAACd,KAAK,CAAC,CAAC,CAAC,CAC9B,CACA,GAAM,CAAAlC,OAAO,CAAGiD,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAC,CACpC,GAAI,CAACrD,KAAK,CAACwD,OAAO,CAACnD,OAAO,CAAC,CAAE,CAC3B,IAAI,CAACC,WAAW,CAAGD,OAAO,CAACoD,WAAW,4BAA8BJ,QAAU,CAC9E,OACF,CACA,IAAI,CAAChD,OAAO,CAAGA,OAAO,CACxB,CAAC,CAAAwB,MAAA,CACDJ,MAAM,CAAN,SAAAA,OAAOjB,IAAY,CAAED,MAAc,CAAEE,SAAmB,CAAY,KAAAiD,MAAA,SAAV,CAAA/C,IAAI,CAAAd,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAA8D,SAAA,CAAA9D,SAAA,IAAG,CAAC,CAChE,IAAI,CAACwB,IAAI,CAAEC,aAAa,CAAmB,kBAAkB,CAAC,CAAEC,KAAK,CAAGf,IAAI,CAC5E,IAAI,CAACa,IAAI,CAAEC,aAAa,CAAmB,oBAAoB,CAAC,CAAEC,KAAK,CAAGhB,MAAM,CAChF,IAAI,CAACc,IAAI,CAAEuC,gBAAgB,CAAmB,qBAAqB,CAAC,CAACnD,SAAS,CAAG,CAAC,CAAG,CAAC,CAAC,CAAEe,OAAO,CAAG,IAAI,CAEvG,GAAI,CAACjB,MAAM,EAAI,CAACC,IAAI,CAAE,MAAO,KAAI,CAACqD,MAAM,CAAC,CAAC,CAC1C,IAAI,CAACrD,IAAI,CAAGA,IAAI,CAChB,IAAI,CAACD,MAAM,CAAGA,MAAM,CACpB,IAAI,CAACE,SAAS,CAAG,CAAC,CAACA,SAAS,CAC5B,IAAI,CAACE,IAAI,CAAGA,IAAI,CAChB,IAAI,CAACN,OAAO,CAAG,IAAI,CACnB,IAAI,CAACC,WAAW,CAAG,IAAI,CACvB,GAAIE,IAAI,EAAI,CAACD,MAAM,CAAE,IAAI,CAACG,QAAQ,CAAG,KAAK,CAE1C,GAAI,CAACH,MAAM,EAAI,CAACC,IAAI,CAAE,CACpBsD,QAAQ,CAACC,OAAO,CAAC,EAAE,CAAC,CACtB,CAAC,IAAM,CACLD,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAG9B,GAAG,CAAC+B,WAAW,CAAC,CACrCxD,IAAI,CAAEA,IAAI,EAAImD,SAAS,CACvBpD,MAAM,CAAEA,MAAM,EAAIoD,SAAS,CAC3B,UAASlD,SAAS,CAAG,GAAG,CAAGkD,SAAS,CACpChD,IAAI,CAAEA,IAAI,GAAK,CAAC,CAAGgD,SAAS,CAAGhD,IAAI,CACnCG,IAAI,CAAE,IAAI,CAACJ,QAAQ,CAAG,QAAQ,CAAGiD,SACnC,CAAC,CAAC,CAAC,CACL,CACA,IAAI,CAAChB,WAAW,CAAC,CAAC,CAClBV,GAAG,kBAAiBxB,SAAS,CAAG,eAAe,CAAG,QAAQ,CAAE,CAAC,CAACyB,GAAG,CAAC,CAChEgB,KAAK,CAAE,CACLe,QAAQ,CAAE,IAAI,CAACzD,IAAI,CACnBD,MAAM,CAAE,IAAI,CAACA,MAAM,CACnBI,IAAI,CAAJA,IAAI,CACJG,IAAI,CAAE,IAAI,CAACJ,QAAQ,CAAG,QAAQ,CAAGiD,SACnC,CACF,CAAC,CAAC,CAACxB,IAAI,CAAC,SAAAkB,QAAQ,CAAI,CAClB,GAAIK,MAAI,CAACnD,MAAM,GAAKA,MAAM,EAAImD,MAAI,CAAClD,IAAI,GAAKA,IAAI,CAAE,OAClDkD,MAAI,CAACN,aAAa,CAACC,QAAQ,CAAE,IAAI,CAAC,CAClCK,MAAI,CAACf,WAAW,CAAC,CAAC,CACpB,CAAC,CAAC,SAAM,CAAC,SAAAuB,KAAK,CAAI,CAChB,GAAIR,MAAI,CAACnD,MAAM,GAAK,EAAE,EAAImD,MAAI,CAAClD,IAAI,GAAK,EAAE,CAAE,OAC5CkD,MAAI,CAACpD,WAAW,CAAG,EAAE,CAAG4D,KAAK,CAC7BR,MAAI,CAACf,WAAW,CAAC,CAAC,CACpB,CAAC,CAAC,CACJ,CAAC,CAAAd,MAAA,CACDsC,OAAO,CAAP,SAAAA,QAAQC,SAAyC,CAAE,CACjD,GAAM,CAAAC,OAAO,CAAID,SAAS,CAACzD,IAAI,GAAKgD,SAAS,CAAG,IAAI,CAAChD,IAAI,CAAGyD,SAAS,CAACzD,IAAI,CAAG,CAAE,CAC/E,MAAO,KAAK,CAAGsB,GAAG,CAAC+B,WAAW,CAAC,CAC7BxD,IAAI,CAAE,IAAI,CAACA,IAAI,EAAImD,SAAS,CAC5BpD,MAAM,CAAE,IAAI,CAACA,MAAM,EAAIoD,SAAS,CAChC,UAAS,IAAI,CAAClD,SAAS,CAAG,GAAG,CAAGkD,SAAS,CACzChD,IAAI,CAAE0D,OAAO,GAAK,CAAC,CAAGV,SAAS,CAAGU,OAAO,CACzCvD,IAAI,CAAE,CAACsD,SAAS,CAACtD,IAAI,CAAGsD,SAAS,CAACtD,IAAI,GAAK,QAAQ,CAAG,IAAI,CAACJ,QAAQ,EAAI,QAAQ,CAAGiD,SACpF,CAAC,CAAC,CACJ,CAAC,CAAA9B,MAAA,CACDgC,MAAM,CAAN,SAAAA,OAAA,CAAS,KAAAS,MAAA,MACP,IAAI,CAAC/D,MAAM,CAAG,EAAE,CAChB,IAAI,CAACC,IAAI,CAAG,EAAE,CACd,IAAI,CAACH,OAAO,CAAG,IAAI,CACnB,IAAI,CAACsC,WAAW,CAAC,CAAC,CAClBV,GAAG,CAAC,qBAAqB,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAkB,QAAQ,CAAI,CAChD,GAAIiB,MAAI,CAAC/D,MAAM,GAAK,EAAE,EAAI+D,MAAI,CAAC9D,IAAI,GAAK,EAAE,CAAE,OAC5C8D,MAAI,CAAClB,aAAa,CAACC,QAAQ,CAAE,IAAI,CAAC,CAClCiB,MAAI,CAAC3B,WAAW,CAAC,CAAC,CACpB,CAAC,CAAC,SAAM,CAAC,SAAAuB,KAAK,CAAI,CAChB,GAAII,MAAI,CAAC/D,MAAM,GAAK,EAAE,EAAI+D,MAAI,CAAC9D,IAAI,GAAK,EAAE,CAAE,OAC5C8D,MAAI,CAAChE,WAAW,CAAG,EAAE,CAAG4D,KAAK,CAC7BI,MAAI,CAAC3B,WAAW,CAAC,CAAC,CACpB,CAAC,CAAC,CACJ,CAAC,CAAAd,MAAA;AAiBD0C,GAAG,CAAH,SAAAA,IAAIC,MAAoB,CAAE;AACxB,GAAM,CAAAC,iBAAiB,CAAIC,IAAI,CAACF,MAAM,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAKD,IAAI,CAAC,IAAI,CAAClE,IAAI,CAAE;AACvE,MAAO,CAAAgE,MAAM,CAACzB,EAAE,EAAIyB,MAAM,CAACI,QAAQ,KAAOJ,MAAM,CAACI,QAAQ,MAAO,EAAE,CAAC,EAAIH,iBAAiB,CAAG,KAAK,CAAG,EAAE,CAAC;AACxG,CAAC,CAAA5C,MAAA;AACDgD,QAAQ,CAAR,SAAAA,SAASL,MAAoB,CAAE;AAC7B,GAAI,CAAAK,QAAQ,CAAGL,MAAM,CAACjE,MAAM;AAC5B,GAAI,CAACsE,QAAQ,CAACC,UAAU,CAAC,KAAK,CAAC,EAAI,CAAC,OAAO,CAACC,IAAI,CAACF,QAAQ,CAACxC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAE;;;AAGpEwC,QAAQ,CAAG,CAACL,MAAM,CAACQ,UAAU,CAAG,UAAU,CAAG,MAAM,CAAG,MAAM,EAAIH,QAAQ;AAC1E;AACA,GAAI,CAAC,aAAa,CAACE,IAAI,CAACF,QAAQ,CAAC,CAAE;AACjCA,QAAQ,CAAGA,QAAQ,CAACtC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAG,GAAG,CAAGsC,QAAQ,CAACtC,KAAK,CAAC,CAAC,CAAC;AAC3D;AACA,MAAO,CAAAsC,QAAQ;AACjB,CAAC,CAAAhD,MAAA;AACQoD,MAAM,CAAf,SAAAA,OAAA,CAAkB,KAAAC,aAAA,CAAAC,MAAA,MAAAC,cAAA;AAChB,GAAM,CAAAC,iBAAiB,CAAG,CAAC,EAAE,IAAI,CAAC9E,MAAM,EAAI,IAAI,CAACC,IAAI,CAAC;AACtD,GAAM,CAAA8E,eAAe,CAAG,CAAC,EAAAJ,aAAA,KAAI,CAAC7E,OAAO,eAAZ6E,aAAA,CAAcpF,MAAM,GAAI,CAAC,EAAI,EAAE;AACxD,GAAM,CAAAO,OAAO,CAAGiF,eAAe,CAAG,IAAI,CAACjF,OAAO,CAAEkC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAG,IAAI,CAAClC,OAAO;AAC3E,GAAM,CAAAkF,aAAa,CAAGC,MAAA,CAAAC,CAAA,OAAI,QAAM,UAAU;AACtC,IAAI,CAACnF,WAAW,EAAIkF,MAAA,CAAAC,CAAA;AACpBD,MAAA,CAAAC,CAAA,WAAQ,QAAM,eAAe,EAAE,IAAI,CAACnF,WAAoB;AACtD,CAAC;AACJ,CAACD,OAAO,EAAImF,MAAA,CAAAC,CAAA;AACXD,MAAA,CAAAC,CAAA,WAAI,YAAc;AAChB,CAAE;AACLpF,OAAO,cAAPA,OAAO,CAAEqF,GAAG,CAAC,SAAAtD,MAAM,QAAI,CAAAoD,MAAA,CAAAC,CAAA;AACtBD,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAER,MAAI,CAACZ,GAAG,CAACnC,MAAM,CAAE,CAAC,QAAM,WAAW;AAC1CoD,MAAA,CAAAC,CAAA,cAAQrD,MAAM,CAAC7B,MAAM,CAAE6B,MAAM,CAACwD,MAAM,cAAgBxD,MAAM,CAACwD,MAAM,KAAM,EAAE,CAACJ,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACvF,CAAC,CAACrD,MAAM,WAAQ,EAAIoD,MAAA,CAAAC,CAAA,MAAG,QAAM,YAAY,CAAI,CAAC,CAAC,GAAC;AACjDD,MAAA,CAAAC,CAAA,eAASrD,MAAM,CAACuC,OAAO,CAAC,CAAC,CAAU,CAAC,QAAK,CAAAa,MAAA,CAAAC,CAAA,eAASrD,MAAM,CAACuC,OAAO,CAAC,CAAC,CAAU;AAC3E;AACD,CAAC,GAAC;AACJ,CAAC;AACL,MAAO,CAAAa,MAAA,CAAAC,CAAA,QAAK,QAAO3B,QAAQ,CAAC+B,YAAY,CAAC,CAAC,CAAG,SAAS,CAAG,EAAG;AAC1DL,MAAA,CAAAC,CAAA,YAAS,QAAM,uBAAuB;AACpCD,MAAA,CAAAC,CAAA,WAAI,gBAAkB,CAAC;AACvBD,MAAA,CAAAC,CAAA,SAAMK,QAAQ,CAAE,IAAI,CAAC/E,UAAW;AAC9ByE,MAAA,CAAAC,CAAA;AACED,MAAA,CAAAC,CAAA,cAAO,WACI;AAAAD,MAAA,CAAAC,CAAA,UAAK,CAAC;AACfD,MAAA,CAAAC,CAAA,UAAOM,IAAI,CAAC,QAAQ,CAAC,QAAM,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,oBAAoB,CAACC,IAAI,CAAE,EAAG,CAAE,CAAC,IAAC;AAC9F,IAAI,CAACtF,YAAY,EAAI4E,MAAA,CAAAC,CAAA,WAAQM,IAAI,CAAC,QAAQ,CAAC,QAAM,QAAQ,CAACI,OAAO,CAAE,IAAI,CAACxE,cAAe,EAAE,IAAI,CAACf,YAAY,CAAC,YAAkB;AACzH;AACN,CAAC;AACJ4E,MAAA,CAAAC,CAAA;AACED,MAAA,CAAAC,CAAA,cAAO,SAAO,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAC;AACpBD,MAAA,CAAAC,CAAA,UAAOM,IAAI,CAAC,QAAQ,CAAC,QAAM,SAAS,CAACC,IAAI,CAAC,QAAQ,CAACC,WAAW,CAAC,sBAAsB,CAACC,IAAI,CAAE,EAAG,CAAE,CAAQ;AACxG,CAAC;AACJV,MAAA,CAAAC,CAAA;AACED,MAAA,CAAAC,CAAA,UAAO,QAAM,iBAAiB,EAACD,MAAA,CAAAC,CAAA,UAAOM,IAAI,CAAC,OAAO,CAACC,IAAI,CAAC,SAAS,CAACzE,KAAK,CAAC,EAAE,CAAE,CAAC,UAAc,CAAC,IAAC;AAC7FiE,MAAA,CAAAC,CAAA,UAAO,QAAM,iBAAiB,EAACD,MAAA,CAAAC,CAAA,UAAOM,IAAI,CAAC,OAAO,CAACC,IAAI,CAAC,SAAS,CAACzE,KAAK,CAAC,GAAG,CAAE,CAAC,mCAAuC;AACpH,CAAC;AACJiE,MAAA,CAAAC,CAAA;AACED,MAAA,CAAAC,CAAA,WAAQM,IAAI,CAAC,QAAQ,CAAC,QAAM,QAAQ,EAACP,MAAA,CAAAC,CAAA,MAAG,QAAM,cAAc,CAAC,kBAAW,CAAI,CAAC,IAAC,CAAAD,MAAA,CAAAC,CAAA,eAAQ,QAAc,CAAS,CAAC,IAAC;AAC9GJ,iBAAiB,EAAIG,MAAA,CAAAC,CAAA,WAAQ,QAAM,QAAQ,CAACU,OAAO,CAAE,IAAI,CAACzE,UAAW,EAAC,QAAc;AACpF,CAAC;AACH2D,iBAAiB,EAAIG,MAAA,CAAAC,CAAA,OAAI,aAAW,SAAS,CAAK,CAAC;AACnDJ,iBAAiB,EAAI,IAAI,CAAC9E,MAAM,EAAI,CAAC,IAAI,CAACC,IAAI,EAAIgF,MAAA,CAAAC,CAAA,UAAG,WAC3C;;AACTD,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAE,IAAI,CAACxB,OAAO,CAAC,CAACrD,IAAI,CAAE,MAAM,CAAC,CAAE,CAAC,+BAA6B,IAAI,CAACJ,QAAQ,CAAG,EAAE,CAAG,WAAW,CAAG,EAAC;;AAErG,CAAC;AACJ8E,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAE,IAAI,CAACxB,OAAO,CAAC,CAACrD,IAAI,CAAE,QAAQ,CAAC,CAAE,CAAC,8BAA4B,IAAI,CAACJ,QAAQ,CAAG,WAAW,CAAG,EAAE,CAAG,EAAC;;AAEtG;AACF,CAAC;AACH2E,iBAAiB,EAAI,IAAI,CAAC1E,IAAI,CAAG,CAAC,EAAI6E,MAAA,CAAAC,CAAA,MAAG,QAAM,UAAU;AACxDD,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAE,IAAI,CAACxB,OAAO,CAAC,CAACxD,IAAI,CAAE,CAAC,CAAC,CAAC,CAAE,CAAC,QAAM,QAAQ,EAAC6E,MAAA,CAAAC,CAAA,MAAG,QAAM,gBAAgB,CAAI,CAAC,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAC,QAAK,CAAC,IAAI,CAAC9E,IAAI,CAAG,CAAK;AAC5G,CAAC;AACH0E,iBAAiB,EAAIE,aAAa;AAClCF,iBAAiB,EAAI,CAAC,EAAAD,cAAA,KAAI,CAAC/E,OAAO,eAAZ+E,cAAA,CAActF,MAAM,GAAI,CAAC,EAAI,EAAE,EAAI0F,MAAA,CAAAC,CAAA,MAAG,QAAM,UAAU;AAC3ED,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAE,IAAI,CAACxB,OAAO,CAAC,CAACxD,IAAI,CAAE,CAAC,CAAC,CAAE,CAAC,QAAM,QAAQ,EAAC,OAAK,CAAC,IAAI,CAACA,IAAI,CAAG,CAAC,CAAC6E,MAAA,CAAAC,CAAA,UAAK,CAAC,CAAAD,MAAA,CAAAC,CAAA,MAAG,QAAM,kBAAkB,CAAI,CAAI;AAC7G;AACC;AACC,CAAC;AACT,CAACJ,iBAAiB,EAAIG,MAAA,CAAAC,CAAA,CAACW,eAAe,KAAE,CAAC;AACzC,CAACf,iBAAiB,EAAIG,MAAA,CAAAC,CAAA,YAAS,QAAM,SAAS;AAC7CD,MAAA,CAAAC,CAAA,WAAI,gBAAkB,CAAC;AACvBD,MAAA,CAAAC,CAAA,OAAI,QAAM,UAAU;AACjBF;AACC;AACG;AACN,CAAC;AACR,CAAC,QAAA9F,WAAA,GA/NuB+F,MAAM,CAACa,SAAS;;;AAkOpCD,eAAe,UAAAE,kBAAA,WAAAF,gBAAA,MAAAG,MAAA,SAAAC,KAAA,CAAA3G,SAAA,CAAAC,MAAA,CAAAC,IAAA,KAAAC,KAAA,CAAAwG,KAAA,EAAAC,KAAA,GAAAA,KAAA,CAAAD,KAAA,CAAAC,KAAA,IAAA1G,IAAA,CAAA0G,KAAA,EAAA5G,SAAA,CAAA4G,KAAA,GAAAF,MAAA,CAAAD,kBAAA,CAAApG,IAAA,CAAAC,KAAA,CAAAmG,kBAAA,QAAAlG,MAAA,CAAAL,IAAA,SAAAwG,MAAA;AACnBG,OAAO,CAAG,KAAK,CAAAH,MAAA;AACfI,eAAe,CAAG,KAAK,CAAAJ,MAAA;AACvBK,WAAW,CAAG,SAAC5F,CAAQ,CAAK;AAC1BA,CAAC,CAACI,cAAc,CAAC,CAAC;AAClBmF,MAAA,CAAKG,OAAO,CAAG,IAAI;AACnBH,MAAA,CAAK5D,WAAW,CAAC,CAAC;AACpB,CAAC,CAAA4D,MAAA;AACDM,mBAAmB,CAAG,SAAC7F,CAAQ,CAAK;AAClCA,CAAC,CAACI,cAAc,CAAC,CAAC;AAClBmF,MAAA,CAAKI,eAAe,CAAG,IAAI;AAC3BJ,MAAA,CAAK5D,WAAW,CAAC,CAAC;AACpB,CAAC,QAAA4D,MAAA,EAAA3E,cAAA,CAAAwE,eAAA,CAAAE,kBAAA,MAAAQ,OAAA,CAAAV,eAAA,CAAAtE,SAAA,CAAAgF,OAAA;AACQ7B,MAAM,CAAf,SAAAA,OAAA,CAAkB;AAChB,MAAO,CAAAO,MAAA,CAAAC,CAAA,YAAS,QAAM,SAAS;AAC7BD,MAAA,CAAAC,CAAA,WAAI,kBAAoB,CAAC;AACzBD,MAAA,CAAAC,CAAA,OAAI,QAAM,UAAU;AAClBD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,WAAI,KAAO,CAAK,CAAC;AACrBD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,qBAAqB,CAAC,QAAM,WAAW;AACjDH,MAAA,CAAAC,CAAA,cAAO,mBAAiB,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACtCD,MAAA,CAAAC,CAAA,eAAQ,WAAiB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,MAAY,CAAC;AACpDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,uBAA2B;AACvC,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,2BAA2B,CAAC,QAAM,WAAW;AACvDH,MAAA,CAAAC,CAAA,cAAO,qBAAmB,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACxCD,MAAA,CAAAC,CAAA,eAAQ,OAAa,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,WAAiB,CAAC;AACrDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,cAAkB;AAC9B,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,4BAA4B,CAAC,QAAM,WAAW;AACxDH,MAAA,CAAAC,CAAA,cAAO,cAAY,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACjCD,MAAA,CAAAC,CAAA,eAAQ,eAAqB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,QAAc,CAAC;AAC1DD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,cAAkB;AAC9B,CAAK,CAAC;AACR,CAAC,IAAI,CAACiB,OAAO,EAAIlB,MAAA,CAAAC,CAAA,OAAIsB,KAAK,CAAE,CAACC,WAAW,CAAE,KAAK,CAAE;AAChDxB,MAAA,CAAAC,CAAA,WAAQ,QAAM,QAAQ,CAACU,OAAO,CAAE,IAAI,CAACS,WAAY,EAAC,OAAK,CAAApB,MAAA,CAAAC,CAAA,MAAG,QAAM,mBAAmB,CAAC,kBAAW,CAAI,CAAS;AAC1G,CAAC;AACJ,IAAI,CAACiB,OAAO,EAAIlB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,2BAA2B,CAAC,QAAM,WAAW;AACxEH,MAAA,CAAAC,CAAA,cAAO,sBAAoB,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACzCD,MAAA,CAAAC,CAAA,eAAQ,SAAe,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,YAAkB,CAAC;AACxDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,6BAAiC;AAC7C,CAAK,CAAC;AACR,IAAI,CAACiB,OAAO,EAAIlB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,gBAAgB,CAAC,QAAM,WAAW;AAC7DH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,aAAmB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,iBAAuB,CAAC;AACjED,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,0CAA8C;AAC1D,CAAK,CAAC;AACR,IAAI,CAACiB,OAAO,EAAIlB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,4BAA4B,CAAC,QAAM,WAAW;AACzEH,MAAA,CAAAC,CAAA,cAAO,yBAAuB,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC5CD,MAAA,CAAAC,CAAA,eAAQ,OAAa,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,SAAe,CAAC;AACnDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,kEAAsE;AAClF,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAI,aAAe,CAAC;AACpBD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,qBAAqB,CAAC,QAAM,WAAW;AACjDH,MAAA,CAAAC,CAAA,cAAO,kBAAgB,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACrCD,MAAA,CAAAC,CAAA,eAAQ,aAAmB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,SAAe,CAAC;AACzDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,gHAAoH;AAChI,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,wBAAwB,CAAC,QAAM,WAAW;AACpDH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,SAAe,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,SAAe,CAAC;AACrDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,4GAAgH;AAC5H,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,wBAAwB,CAAC,QAAM,WAAW;AACpDH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,YAAkB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,MAAY,CAAC;AACrDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,+IAAmJ;AAC/J,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,oBAAoB,CAAC,QAAM,WAAW;AAChDH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,cAAoB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,UAAgB,CAAC;AAC3DD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,gGAAkG;AAC9G,CAAK,CAAC;AACTD,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,uBAAuB,CAAC,QAAM,WAAW;AACnDH,MAAA,CAAAC,CAAA,cAAO,eAAa,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAClCD,MAAA,CAAAC,CAAA,eAAQ,MAAY,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,WAAiB,CAAC;AACpDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,iIAAqI;AACjJ,CAAK,CAAC;AACR,CAAC,IAAI,CAACkB,eAAe,EAAInB,MAAA,CAAAC,CAAA,OAAIsB,KAAK,CAAE,CAACC,WAAW,CAAE,KAAK,CAAE;AACxDxB,MAAA,CAAAC,CAAA,WAAQ,QAAM,QAAQ,CAACU,OAAO,CAAE,IAAI,CAACU,mBAAoB,EAAC,OAAK,CAAArB,MAAA,CAAAC,CAAA,MAAG,QAAM,mBAAmB,CAAC,kBAAW,CAAI,CAAS;AAClH,CAAC;AACJ,IAAI,CAACkB,eAAe,EAAInB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,uBAAuB,CAAC,QAAM,WAAW;AAC5EH,MAAA,CAAAC,CAAA,cAAO,cAAY,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACjCD,MAAA,CAAAC,CAAA,eAAQ,cAAoB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,QAAc,CAAC;AACzDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,4GAAgH;AAC5H,CAAK,CAAC;AACR,IAAI,CAACkB,eAAe,EAAInB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,oBAAoB,CAAC,QAAM,WAAW;AACzEH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,cAAoB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,QAAc,CAAC;AACzDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,sKAA0K;AACtL,CAAK,CAAC;AACR,IAAI,CAACkB,eAAe,EAAInB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,wBAAwB,CAAC,QAAM,WAAW;AAC7EH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,SAAe,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,UAAgB,CAAC;AACtDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,mJAAuJ;AACnK,CAAK,CAAC;AACR,IAAI,CAACkB,eAAe,EAAInB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,wBAAwB,CAAC,QAAM,WAAW;AAC7EH,MAAA,CAAAC,CAAA,cAAO,WAAS,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AAC9BD,MAAA,CAAAC,CAAA,eAAQ,OAAa,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,WAAiB,CAAC;AACrDD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,uIAA2I;AACvJ,CAAK,CAAC;AACR,IAAI,CAACkB,eAAe,EAAInB,MAAA,CAAAC,CAAA,WAAID,MAAA,CAAAC,CAAA,MAAGE,IAAI,CAAC,wBAAwB,CAAC,QAAM,WAAW;AAC7EH,MAAA,CAAAC,CAAA,cAAO,qBAAmB,CAAAD,MAAA,CAAAC,CAAA,UAAK,CAAQ,CAAC;AACxCD,MAAA,CAAAC,CAAA,eAAQ,cAAoB,CAAC,QAAK,CAAAD,MAAA,CAAAC,CAAA,eAAQ,aAAmB,CAAC;AAC9DD,MAAA,CAAAC,CAAA,cAAOD,MAAA,CAAAC,CAAA,UAAK,CAAC,kIAAsI;AAClJ,CAAK;AACN;AACG,CAAC;AACZ,CAAC,QAAAW,eAAA,GA3G2BZ,MAAM,CAACa,SAAS;;;AA8GvC,GAAM,CAAAvC,QAAQ,CAAG,aAAAmD,QAAA;;;;;;AAMtB,SAAAC,OAAA,CAAc,KAAAC,MAAA;AACZA,MAAA,CAAAF,QAAA,CAAA/G,IAAA,KAAM,CAAC,OAACiH,MAAA,CANVC,OAAO,QAAAD,MAAA,CACPE,OAAO,CAAkB,IAAI,CAAAF,MAAA,CAC7BG,QAAQ,CAAkB,IAAI,CAAAH,MAAA,CAC9BI,gBAAgB,CAAG,KAAK,CAAAJ,MAAA,CACxBK,WAAW,CAAG,IAAI;AAGhB,GAAM,CAAAC,iBAAiB,CAAGC,QAAQ,CAACC,QAAQ,CAAChC,IAAI,CAACiC,WAAW,CAAC,GAAG,CAAC;AACjET,MAAA,CAAKC,OAAO,CAAGM,QAAQ,CAACC,QAAQ,CAAChC,IAAI,CAACpD,KAAK,CAAC,CAAC,CAAEkF,iBAAiB,CAAG,CAAC,CAAC;AACrEN,MAAA,CAAKU,EAAE,CAACH,QAAQ,CAACC,QAAQ,CAAChC,IAAI,CAAC;AAC/BwB,MAAA,CAAKW,cAAc,CAAC,IAAI,CAAC;AACzB,GAAIC,MAAM,CAACC,OAAO,CAAED,MAAM,CAACE,gBAAgB,CAAC,UAAU,CAAE,SAAAjH,CAAC,CAAI;AAC3D8C,QAAQ,CAACoE,QAAQ,CAAClH,CAAC,CAAC;AACpBmG,MAAA,CAAKgB,MAAM,CAAC,CAAC;AACf,CAAC,CAAC;AACFJ,MAAM,CAACK,QAAQ,CAAG,UAAM;AACtBtE,QAAQ,CAACgE,cAAc,CAAC,CAAC;AAC3B,CAAC,CAAC,OAAAX,MAAA;AACJ,CAACvF,cAAA,CAAAsF,MAAA,CAAAD,QAAA,MAAAoB,OAAA,CAAAnB,MAAA,CAAApF,SAAA,CAAAuG,OAAA;AACDC,WAAW,CAAX,SAAAA,YAAA,CAAc;AACZ,MAAO,KAAI,CAACjB,OAAO,GAAK,IAAI,GAAK,CAAC,IAAI,CAACE,gBAAgB,EAAI,IAAI,CAACD,QAAQ,GAAK,IAAI,CAAC;AACpF,CAAC,CAAAe,OAAA;AACDxC,YAAY,CAAZ,SAAAA,aAAA,CAAe;AACb,MAAO,KAAI,CAACyB,QAAQ,GAAK,IAAI;AAC/B,CAAC,CAAAe,OAAA;AACDP,cAAc,CAAd,SAAAA,eAAeS,IAAc,CAAE;AAC7B,GAAM,CAAAC,WAAW,CAAGT,MAAM,CAACU,UAAU,CAAG,IAAI;AAC5C,GAAM,CAAAjB,WAAW,CAAIO,MAAM,CAACW,WAAW,CAAG,GAAI;AAC9C,GAAI,IAAI,CAACnB,gBAAgB,GAAKiB,WAAW,EAAI,IAAI,CAAChB,WAAW,GAAKA,WAAW,CAAE;AAC7E,IAAI,CAACD,gBAAgB,CAAGiB,WAAW;AACnC,IAAI,CAAChB,WAAW,CAAGA,WAAW;AAC9B,GAAI,CAACe,IAAI,CAAE,IAAI,CAACJ,MAAM,CAAC,CAAC;AAC1B;AACF,CAAC,CAAAE,OAAA;AACDM,IAAI,CAAJ,SAAAA,KAAKhD,IAAY,CAAW;AAC1B,GAAI,CAACA,IAAI,CAACb,UAAU,CAAC,IAAI,CAACsC,OAAO,CAAC,CAAE,MAAO,MAAK;;AAEhD,GAAI,IAAI,CAACS,EAAE,CAAClC,IAAI,CAAC,CAAE,KAAAiD,eAAA;AACjB,CAAAA,eAAA,CAAAb,MAAM,CAACC,OAAO,SAAdY,eAAA,CAAgBC,SAAS,CAAC,CAAC,IAAI,CAACxB,OAAO,CAAE,IAAI,CAACC,QAAQ,CAAC,CAAE,EAAE,CAAE3B,IAAI,CAAC;AACpE;AACA,MAAO,KAAI;AACb,CAAC,CAAA0C,OAAA;;AAEDR,EAAE,CAAF,SAAAA,GAAGlC,IAAY,CAAW;AACxB,GAAI,CAACA,IAAI,CAACb,UAAU,CAAC,IAAI,CAACsC,OAAO,CAAC,CAAE,MAAO,MAAK;;AAEhD,GAAM,CAAA0B,GAAG,CAAGnD,IAAI,CAACpD,KAAK,CAAC,IAAI,CAAC6E,OAAO,CAACtH,MAAM,CAAC;AAC3C,GAAI,CAACgJ,GAAG,EAAIA,GAAG,CAAChE,UAAU,CAAC,GAAG,CAAC,CAAE;AAC/B,IAAI,CAACuC,OAAO,CAAGyB,GAAG;AAClB,GAAI,IAAI,CAACvB,gBAAgB,CAAE;AACzB,IAAI,CAACD,QAAQ,CAAG,IAAI;AACtB,CAAC,IAAM;AACL,MAAO,KAAI,CAACA,QAAQ,GAAK,IAAI;AAC/B;AACF,CAAC,IAAM;AACL,IAAI,CAACA,QAAQ,CAAGwB,GAAG;AACrB;AACA,MAAO,KAAI;AACb,CAAC,CAAAT,OAAA;AACDtE,OAAO,CAAP,SAAAA,QAAQ+E,GAAW,CAAE;AACnB,GAAM,CAAAnD,IAAI,CAAG,IAAI,CAACyB,OAAO,CAAG0B,GAAG;AAC/B,GAAI,IAAI,CAACjB,EAAE,CAAClC,IAAI,CAAC,CAAE,KAAAoD,gBAAA;AACjB,CAAAA,gBAAA,CAAAhB,MAAM,CAACC,OAAO,SAAde,gBAAA,CAAgBC,YAAY,CAAC,CAAC,IAAI,CAAC3B,OAAO,CAAE,IAAI,CAACC,QAAQ,CAAC,CAAE,EAAE,CAAE3B,IAAI,CAAC;AACvE;AACA,MAAO,KAAI;AACb,CAAC,CAAA0C,OAAA;AACDH,QAAQ,CAAR,SAAAA,SAASlH,CAAgB,CAAE;AACzB,GAAIhB,KAAK,CAACwD,OAAO,CAACxC,CAAC,CAACiI,KAAK,CAAC,CAAE;AAC1B,IAAAC,QAAA,CAA4BlI,CAAC,CAACiI,KAAK,CAA5B5B,OAAO,CAAA6B,QAAA,IAAE5B,QAAQ,CAAA4B,QAAA;AACxB,IAAI,CAAC7B,OAAO,CAAGA,OAAO;AACtB,IAAI,CAACC,QAAQ,CAAGA,QAAQ;AACxB,GAAI,IAAI,CAACC,gBAAgB,CAAE,IAAI,CAACF,OAAO,CAAG,IAAI;AAChD,CAAC,IAAM;AACL,IAAI,CAACA,OAAO,CAAG,IAAI;AACnB,IAAI,CAACC,QAAQ,CAAG,IAAI;AACpB,IAAI,CAACO,EAAE,CAACH,QAAQ,CAACC,QAAQ,CAAChC,IAAI,CAAC;AACjC;AACA,IAAI,CAACwC,MAAM,CAAC,CAAC;AACf,CAAC,QAAAjB,MAAA,GA/EuCiC,OAAO;AAgFjD,CAAC,CAAC;;AAEWC,SAAS,UAAAC,kBAAA,WAAAD,UAAA,SAAAC,kBAAA,CAAAlJ,KAAA,MAAAN,SAAA,SAAA+B,cAAA,CAAAwH,SAAA,CAAAC,kBAAA,EAAAD,SAAA;;AAEbE,cAAc,CAArB,SAAAA,eAAA,CAAwB;AACtB,GAAI,CAAAC,IAAI,CAAG,IAAI,CAACC,QAAQ,GAAK,MAAM,CAAG,MAAM,CAAG,EAAE;AACjD,GAAI,IAAI,CAACA,QAAQ,GAAK,MAAM,CAAE;AAC5BD,IAAI,CAAGxB,MAAM,CAAC0B,UAAU,QAAjB1B,MAAM,CAAC0B,UAAU,CAAG,8BAA8B,CAAC,CAACC,OAAO,CAAG,MAAM,CAAG,EAAE;AAClF;AACAhC,QAAQ,CAACiC,eAAe,CAACC,SAAS,CAAGL,IAAI;AAC3C,CAAC,KAAAM,OAAA,CAAAT,SAAA,CAAAtH,SAAA,CAAA+H,OAAA;AACQ9H,iBAAiB,CAA1B,SAAAA,kBAAA,CAA6B,KAAA+H,MAAA;AAC3BhG,QAAQ,CAACiG,SAAS,CAAC,iBAAM,CAAAD,MAAI,CAACnH,WAAW,CAAC,CAAC,GAAC;AAC5C,GAAIoF,MAAM,CAACC,OAAO,CAAE;AAClB,IAAI,CAAC3G,IAAI,CAAE4G,gBAAgB,CAAC,OAAO,CAAE,SAAAjH,CAAC,CAAI;AACxC,GAAI,CAAAgJ,EAAE,CAAGhJ,CAAC,CAACiJ,MAAqB;AAChC,KAAOD,EAAE,CAAEA,EAAE,CAAGA,EAAE,CAACE,UAAyB,CAAE;AAC5C,GAAIF,EAAE,CAACG,OAAO,GAAK,GAAG,EAAIrG,QAAQ,CAAC6E,IAAI,CAAEqB,EAAE,CAAuBrE,IAAI,CAAC,CAAE;AACvE3E,CAAC,CAACI,cAAc,CAAC,CAAC;AAClBJ,CAAC,CAACoJ,wBAAwB,CAAC,CAAC;AAC5BN,MAAI,CAACnH,WAAW,CAAC,CAAC;AAClB;AACF;AACF;AACF,CAAC,CAAC;AACJ;AACF,CAAC,CAAAkH,OAAA;AACQ5E,MAAM,CAAf,SAAAA,OAAA,CAAkB;AAChB,GAAM,CAAAoF,QAAQ,CAAGvG,QAAQ,CAACwE,WAAW,CAAC,CAAC,EAAIxE,QAAQ,CAAC+B,YAAY,CAAC,CAAC,EAAI,CAAC/B,QAAQ,CAAC0D,WAAW;AACzF,CAAC8C,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAQ,CAAEC,cAAc,CAAE,UAAU,CAAC,CAAG,CAAC,CAAC;AAC7E,MAAO,CAAAhF,MAAA,CAAAC,CAAA,QAAK,QAAO,aAAa,EAAI3B,QAAQ,CAACwE,WAAW,CAAC,CAAC,EAAIxE,QAAQ,CAAC+B,YAAY,CAAC,CAAC,CAAG,cAAc,CAAG,EAAE,CAAE,CAACkB,KAAK,CAAEsD,QAAS;AAC3HvG,QAAQ,CAACwE,WAAW,CAAC,CAAC,EAAI9C,MAAA,CAAAC,CAAA,CAAChG,WAAW,EAACsD,EAAE,CAAEe,QAAQ,CAACuD,OAAS,CAAE,CAAC;AAChEvD,QAAQ,CAAC+B,YAAY,CAAC,CAAC,EAAIL,MAAA,CAAAC,CAAA,CAACgF,WAAW,EAAC1H,EAAE,CAAEe,QAAQ,CAACwD,QAAU,CAAE,CAAC;AACnE9B,MAAA,CAAAC,CAAA,QAAKsB,KAAK,CAAE,CAAC2D,KAAK,CAAE,MAAM,CAAE,CAAM;AAC/B,CAAC;AACR,CAAC,QAAAtB,SAAA,GAjC4B5D,MAAM,CAACa,SAAS,EAAlC+C,SAAS,CACbI,QAAQ,CAA8B,MAAM;;;AAmCrDhE,MAAM,CAACP,MAAM,CAACO,MAAA,CAAAC,CAAA,CAAC2D,SAAS,KAAE,CAAC,CAAE1B,QAAQ,CAACiD,cAAc,CAAC,MAAM,CAAE,CAAC;;AAE9D,GAAI5C,MAAM,CAAC0B,UAAU,QAAjB1B,MAAM,CAAC0B,UAAU,CAAG,8BAA8B,CAAC,CAACC,OAAO,CAAE;AAC/DhC,QAAQ,CAACiC,eAAe,CAACC,SAAS,CAAG,MAAM;AAC7C;AACA7B,MAAM,CAAC0B,UAAU,cAAjB1B,MAAM,CAAC0B,UAAU,CAAG,8BAA8B,CAAC,CAACxB,gBAAgB,CAAC,QAAQ,CAAE,SAAA2C,KAAK,CAAI;AACtF,GAAIxB,SAAS,CAACI,QAAQ,GAAK,MAAM,CAAE9B,QAAQ,CAACiC,eAAe,CAACC,SAAS,CAAGgB,KAAK,CAAClB,OAAO,CAAG,MAAM,CAAG,EAAE;AACrG,CAAC,CAAC","ignoreList":[]}